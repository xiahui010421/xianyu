# ä»£ç å½’æ¡£æŠ¥å‘Š

**å½’æ¡£æ—¥æœŸ**: 2025-12-31
**æ‰§è¡Œäºº**: Claude Code
**ä»»åŠ¡**: æ¸…ç†åºŸå¼ƒä»£ç ï¼Œä¿æŒä»£ç åº“æ•´æ´

---

## ğŸ“Š å½’æ¡£æ¦‚è§ˆ

### å½’æ¡£ç»Ÿè®¡
- **å½’æ¡£æ–‡ä»¶æ•°**: 3 ä¸ª
- **å½’æ¡£ç›®å½•**: `archive/old-modules/`
- **å½±å“èŒƒå›´**: ä»…æ—§æ¶æ„é—ç•™ä»£ç ï¼Œä¸å½±å“æ–°æ¶æ„è¿è¡Œ

### å½’æ¡£æ–‡ä»¶æ¸…å•

| æ–‡ä»¶å | åŸè·¯å¾„ | å½’æ¡£åŸå›  | æ›¿ä»£æ–¹æ¡ˆ |
|--------|--------|----------|----------|
| `task.py` | `src/task.py` | æ—§ä»»åŠ¡ç®¡ç†æ¨¡å— | `src/domain/models/task.py` + `TaskService` |
| `file_operator.py` | `src/file_operator.py` | æ—§æ–‡ä»¶æ“ä½œç±» | `JsonTaskRepository` + `aiofiles` |
| `prompt_generator.py` | `prompt_generator.py` | å‘½ä»¤è¡Œå·¥å…· | Web UI ä»»åŠ¡ç”ŸæˆåŠŸèƒ½ |

---

## ğŸ” è¯¦ç»†åˆ†æ

### 1. task.py
**åŠŸèƒ½**: æ—§çš„ä»»åŠ¡ CRUD æ“ä½œ
- åŒ…å« `Task`ã€`TaskUpdate` æ¨¡å‹å®šä¹‰
- æä¾› `add_task`ã€`update_task`ã€`get_task`ã€`remove_task` å‡½æ•°
- ç›´æ¥æ“ä½œ `config.json` æ–‡ä»¶

**ä¸ºä»€ä¹ˆå½’æ¡£**:
- æ–°æ¶æ„é‡‡ç”¨ DDD åˆ†å±‚è®¾è®¡
- é¢†åŸŸæ¨¡å‹ã€æœåŠ¡å±‚ã€ä»“å‚¨å±‚èŒè´£åˆ†ç¦»
- æ›´å¥½çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§

**æ›¿ä»£æ–¹æ¡ˆ**:
```python
# æ—§æ–¹å¼
from src.task import add_task, Task

# æ–°æ–¹å¼
from src.services.task_service import TaskService
from src.infrastructure.persistence.json_task_repository import JsonTaskRepository
from src.domain.models.task import Task, TaskCreate

repository = JsonTaskRepository()
service = TaskService(repository)
await service.create_task(TaskCreate(...))
```

### 2. file_operator.py
**åŠŸèƒ½**: ç®€å•çš„å¼‚æ­¥æ–‡ä»¶è¯»å†™å°è£…
- æä¾› `read()` å’Œ `write()` æ–¹æ³•
- åŸºäº `aiofiles` å®ç°

**ä¸ºä»€ä¹ˆå½’æ¡£**:
- åŠŸèƒ½è¿‡äºç®€å•ï¼ŒæŠ½è±¡å±‚æ¬¡ä¸å¤Ÿ
- æ–°æ¶æ„çš„ä»“å‚¨å±‚æä¾›æ›´ä¸“ä¸šçš„æŒä¹…åŒ–é€»è¾‘
- ç›´æ¥ä½¿ç”¨ `aiofiles` æ›´çµæ´»

**æ›¿ä»£æ–¹æ¡ˆ**:
```python
# æ—§æ–¹å¼
from src.file_operator import FileOperator
op = FileOperator("config.json")
content = await op.read()

# æ–°æ–¹å¼
from src.infrastructure.persistence.json_task_repository import JsonTaskRepository
repository = JsonTaskRepository()
tasks = await repository.find_all()
```

### 3. prompt_generator.py
**åŠŸèƒ½**: å‘½ä»¤è¡Œ Prompt ç”Ÿæˆå·¥å…·
- ä½¿ç”¨ AI æ ¹æ®ç”¨æˆ·éœ€æ±‚ç”Ÿæˆåˆ†ææ ‡å‡†
- è‡ªåŠ¨æ›´æ–° `config.json` æ·»åŠ æ–°ä»»åŠ¡
- å‘½ä»¤è¡Œå‚æ•°é©±åŠ¨

**ä¸ºä»€ä¹ˆå½’æ¡£**:
- åŠŸèƒ½å·²é›†æˆåˆ° Web UI
- Web UI æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
- å‡å°‘å‘½ä»¤è¡Œå·¥å…·çš„ç»´æŠ¤æˆæœ¬

**æ›¿ä»£æ–¹æ¡ˆ**:
- Web UI: `/api/tasks/generate` æ¥å£
- å‰ç«¯: ä»»åŠ¡åˆ›å»ºé¡µé¢çš„ AI ç”ŸæˆåŠŸèƒ½
- åç«¯: `src/api/routes/settings.py` ä¸­çš„ç”Ÿæˆé€»è¾‘

---

## âœ… éªŒè¯ç»“æœ

### ä»£ç å®Œæ•´æ€§æ£€æŸ¥
- âœ… `src/app.py` è¯­æ³•æ£€æŸ¥é€šè¿‡
- âœ… `spider_v2.py` è¯­æ³•æ£€æŸ¥é€šè¿‡
- âœ… æ— æ´»è·ƒä»£ç å¼•ç”¨å·²å½’æ¡£æ¨¡å—
- âœ… æµ‹è¯•æ–‡ä»¶æ— éœ€æ›´æ–°

### ä¾èµ–å…³ç³»éªŒè¯
- âœ… æ–°æ¶æ„æ‰€æœ‰æ¨¡å—å¯¼å…¥è·¯å¾„æ­£ç¡®
- âœ… API è·¯ç”±æ­£å¸¸æ³¨å†Œ
- âœ… æœåŠ¡å±‚ä¾èµ–æ³¨å…¥é…ç½®å®Œæ•´
- âœ… çˆ¬è™«æ ¸å¿ƒé€»è¾‘æœªå—å½±å“

### å¼•ç”¨æ£€æŸ¥ç»“æœ
ä»…ä»¥ä¸‹å½’æ¡£æ–‡ä»¶ä¸­å­˜åœ¨ç›¸äº’å¼•ç”¨ï¼ˆæ­£å¸¸ï¼‰ï¼š
- `archive/old-modules/task.py` â†’ `file_operator.py`
- `archive/web_server.py` â†’ `task.py`, `file_operator.py`

**ç»“è®º**: æ— æ´»è·ƒä»£ç ä¾èµ–å·²å½’æ¡£æ¨¡å—ï¼Œç³»ç»ŸåŠŸèƒ½å®Œæ•´ã€‚

---

## ğŸ“ æ€»ç»“

### å½’æ¡£æˆæœ
1. âœ… æ¸…ç†äº† 3 ä¸ªåºŸå¼ƒçš„æ—§æ¶æ„æ–‡ä»¶
2. âœ… ä¿æŒäº†ä»£ç åº“çš„æ•´æ´æ€§
3. âœ… éªŒè¯äº†æ–°æ¶æ„çš„å®Œæ•´æ€§
4. âœ… åˆ›å»ºäº†è¯¦ç»†çš„å½’æ¡£æ–‡æ¡£

### å½“å‰æ¶æ„çŠ¶æ€
- **æ ¸å¿ƒå…¥å£**: `src/app.py` (FastAPI åº”ç”¨)
- **çˆ¬è™«å¼•æ“**: `src/scraper.py` + `spider_v2.py`
- **åˆ†å±‚æ¶æ„**: API â†’ æœåŠ¡ â†’ é¢†åŸŸ â†’ åŸºç¡€è®¾æ–½
- **é…ç½®ç®¡ç†**: `src/infrastructure/config/`
- **æŒä¹…åŒ–**: `src/infrastructure/persistence/`

### åç»­å»ºè®®
1. å®šæœŸæ£€æŸ¥å¹¶å½’æ¡£åºŸå¼ƒä»£ç 
2. ä¿æŒæ–°æ¶æ„çš„åˆ†å±‚æ¸…æ™°
3. é¿å…åœ¨æ–°ä»£ç ä¸­å¼•ç”¨æ—§æ¨¡å—
4. æ›´æ–°ç›¸å…³æ–‡æ¡£åæ˜ æ¶æ„å˜åŒ–
